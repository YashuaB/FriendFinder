<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="/assets/style.css">
  <script src="https://code.jquery.com/jquery.js"></script>
 


  <title>Friend Finder</title>
</head>

<body>

  <h1>Survey Questions</h1>
  <h2>About You</h2>
  <form action="/" method="POST">
  
    Full Name :<br>
  <input id="name" type="text" name="firstname" required placeholder="Name"><br>
    Link to image of yourself:<br>
  <input id="image" type="text" name="image-link" required placeholder="link address">


    <p>Question 1</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>


    <p>Question 2</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>


    <p>Question 3</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>


    <p>Question 4</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>


    <p>Question 5</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>



    <p>Question 6</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>



    <p>Question 7</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>


    <p>Question 8</p>
    <p></p>
    <select class="surveyQuestion">
      <option>Select choice</option>
      <option value="1">(strongly disagree)</option>
      <option value="2">(disagree)</option>
      <option value="3">(neutral)</option>
      <option value="4">(agree)</option>
      <option value="5">(strongly agree)</option>
    </select>
    

    <p>Question 9</p>
    <p></p>
    <select class="surveyQuestion">
        <option>Select choice</option>
        <option value="1">(strongly disagree)</option>
        <option value="2">(disagree)</option>
        <option value="3">(neutral)</option>
        <option value="4">(agree)</option>
        <option value="5">(strongly agree)</option>
      </select>

      <p>Question 10</p>
      <p></p>
      <select class="surveyQuestion">
        <option>Select choice</option>
        <option value="1">(strongly disagree)</option>
        <option value="2">(disagree)</option>
        <option value="3">(neutral)</option>
        <option value="4">(agree)</option>
        <option value="5">(strongly agree)</option>
      </select> <br>


      <input id="surveySubmitBtn"  type="submit" value="Submit">
  </form>

  <div class="modal-body"></div>



  <script>

    $(document).ready(function(){
     
      $("#surveySubmitBtn").click(function(event){
        event.preventDefault();

        var answers = $("select.surveyQuestion  option:selected")
        var values =[]
        var surveyAnsw;
        for(var i = 0; i < answers.length;i++){
         
          surveyAnsw = parseInt(answers[i].value)

         if(Number.isInteger(surveyAnsw)){
         
          values.push(surveyAnsw)
          console.log(values)
         }
        }

        var newFriend = {
          name: $("#name").val().trim(),
          photo: $("#image").val().trim(),
          score: values
        }



         $.post("/api/friends", newFriend,function(data){
    

          console.log("this console log is the data")
          console.log(data)




          var modalDiv = `<div id="myModal" class="modal">
                                    <div class="modal-content">
                                 <span class="close">&times;</span>
                                     <p>Some text in the Modal..</p>
                                     <p>${data.name}</p>
                                     <img src="${data.photo}">
                                    </div>

                                    </div>`
          $(".modal").css({display:"block"})
          $(".modal-body").append(modalDiv)

         console.log("survey.html", data)
         console.log("Adding friends...")

         $("#name").val("")
         $("#image").val("")

         })


         $(".close").click(function(){
           $(".modal").css({display:"block"})
         })
        // exports.module = newFriend
      })

    })
  
  
  </script>


</body>

</html>